(()=>{"use strict";class e{constructor(){let{container:e=null,btns:t=null,next:s=null,prev:i=null,activeClass:n="",animate:l,autoPlay:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.container=document.querySelector(e);try{this.slides=[...this.container.children]}catch(e){}this.btns=document.querySelectorAll(t),this.prev=document.querySelector(i),this.next=document.querySelector(s),this.activeClass=n,this.animate=l,this.autoPlay=a,this.slideIndex=1}}class t extends e{constructor(e){super(e)}showSlides(e){try{e>this.slides.length&&(this.slideIndex=1),e<1&&(this.slideIndex=this.slides.length);try{this.hanson.style.opacity=0,3===e?(this.hanson.classList.add("animated"),setTimeout((()=>{this.hanson.style.opacity=1,this.hanson.classList.add("slideInUp")}),3e3)):this.hanson.classList.remove("slideInUp")}catch(e){}this.slides.forEach((e=>{e.style.display="none"})),this.slides[this.slideIndex-1].style.display="block"}catch(e){}}plusSlides(e){this.showSlides(this.slideIndex+=e)}bindTriggers(){this.btns.forEach(((e,t)=>{e.addEventListener("click",(()=>{this.plusSlides(1)})),e.parentNode.previousElementSibling.addEventListener("click",(e=>{e.preventDefault(),this.slideIndex=1,this.showSlides(this.slideIndex)}))})),document.querySelectorAll(".prevmodule").forEach((e=>{e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.plusSlides(-1)}))})),document.querySelectorAll(".nextmodule").forEach((e=>{e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.plusSlides(1)}))}))}render(){if(this.container){try{this.hanson=document.querySelector(".hanson")}catch(e){}this.showSlides(this.slideIndex),this.bindTriggers()}}}class s{constructor(e,t){this.btns=document.querySelectorAll(e),this.overlay=document.querySelector(t),this.close=this.overlay.querySelector(".close"),this.onPlayerStateChange=this.onPlayerStateChange.bind(this)}bindTriggers(){this.btns.forEach(((e,t)=>{try{const s=e.closest(".module__video-item").nextElementSibling;t%2==0&&s.setAttribute("data-disabled","true")}catch(e){}e.addEventListener("click",(()=>{e.closest(".module__video-item")&&"true"==e.closest(".module__video-item").getAttribute("data-disabled")||(this.activeBtn=e,document.querySelector("iframe#frame")?(this.overlay.style.display="flex",this.path!==e.getAttribute("data-url")&&(this.path=e.getAttribute("data-url"),this.player.loadVideoById({videoId:this.path}))):(this.path=e.getAttribute("data-url"),this.createPlayer(this.path)))}))}))}bindCloseBtn(){this.close.addEventListener("click",(()=>{this.overlay.style.display="none",this.player.stopVideo()}))}createPlayer(e){this.player=new YT.Player("frame",{height:"100%",width:"100%",videoId:`${e}`,events:{onStateChange:this.onPlayerStateChange}}),this.overlay.style.display="flex"}onPlayerStateChange(e){try{const t=this.activeBtn.closest(".module__video-item").nextElementSibling,s=this.activeBtn.querySelector("svg").cloneNode(!0);0===e.data&&t.querySelector(".play__circle").classList.contains("closed")&&(t.querySelector(".play__circle").classList.remove("closed"),t.querySelector("svg").remove(),t.querySelector(".play__circle").append(s),t.querySelector(".play__text").textContent="play video",t.querySelector(".play__text").classList.remove("attention"),t.style.opacity="1",t.style.filter="none",t.setAttribute("data-disabled","false"))}catch(e){}}init(){if(this.btns.length>0){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.bindTriggers(),this.bindCloseBtn()}}}class i extends e{constructor(e,t,s,i,n,l){super(e,t,s,i,n,l)}decorizeSlides(){this.slides.forEach((e=>{e.classList.remove(this.activeClass),this.animate&&(e.querySelector(".card__title").style.opacity="0.4",e.querySelector(".card__controls-arrow").style.opacity="0.4")})),"BUTTON"!=this.slides[0].tagName&&this.slides[0].classList.add(this.activeClass),this.animate&&(this.slides[0].querySelector(".card__title").style.opacity="1",this.slides[0].querySelector(".card__controls-arrow").style.opacity="1")}bindTriggers(){this.next.addEventListener("click",(()=>this.nextSlide())),this.prev.addEventListener("click",(()=>this.prevSlide()))}nextSlide(){this.container.append(this.slides[0]),this.slides.push(this.slides[0]),this.slides.shift(),this.decorizeSlides()}prevSlide(){let e=this.slides[this.slides.length-1];this.container.prepend(e),this.slides.unshift(e),this.slides.pop(),this.decorizeSlides()}autoPlaySlider(){const e=setInterval((()=>this.nextSlide()),+this.autoPlay);this.container.addEventListener("mouseover",(()=>clearInterval(e))),this.prev.addEventListener("mouseover",(()=>clearInterval(e))),this.next.addEventListener("mouseover",(()=>clearInterval(e)))}ContinueAutoPlay(){this.container.addEventListener("mouseout",(()=>this.autoPlaySlider())),this.prev.addEventListener("mouseout",(()=>this.autoPlaySlider())),this.next.addEventListener("mouseout",(()=>this.autoPlaySlider()))}init(){try{this.container.style.cssText="\n            display: flex;\n            flex-wrap: wrap;\n            overflow: hidden;\n            align-items: flex-start;\n        ",this.bindTriggers(),this.decorizeSlides(),this.autoPlay&&(this.autoPlaySlider(),this.ContinueAutoPlay())}catch(e){}}}class n{constructor(e,t,s){try{this.officerold=document.querySelector(e),this.officernew=document.querySelector(t),this.oldCards=this.officerold.querySelectorAll(s),this.newCards=this.officernew.querySelectorAll(s)}catch(e){}}hideCard(e){e.forEach(((e,t,s)=>{t!==s.length-1&&(e.style.display="none",e.classList.add("animated"))}))}showCards(e,t){this.trigger=t.querySelector(".plus");let s=0;this.trigger.addEventListener("click",(()=>{s<e.length-2?(e[s].style.display="flex",e[s].classList.add("fadeIn"),s++):(e[s].style.display="flex",e[s].classList.add("fadeIn"),e[e.length-1].style.display="none")}))}init(){try{this.hideCard(this.oldCards),this.hideCard(this.newCards),this.showCards(this.oldCards,this.officerold),this.showCards(this.newCards,this.officernew)}catch(e){}}}class l{constructor(e){this.forms=document.querySelectorAll(e),this.message={success:"отправка завершена!",loading:"загрузка",failure:"ошибка отправки данных"},this.path="../assets/question.php"}async postData(e,t){let s=await fetch(e,{method:"POST",body:t});return await s.text()}init(){this.forms.forEach((e=>{e.addEventListener("submit",(t=>{t.preventDefault();let s=document.createElement("div");s.classList.add("animated","fadeIn"),s.style.cssText="\n                    width: 200px;\n                    height: 200px;\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    background: #000;\n                    color: #fff;\n                    border-radius: 10px;\n                     \n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                ",s.textContent=this.message.loading,e.append(s);const i=new FormData(e);this.postData(this.path,i).then((e=>{console.log(e),s.textContent=this.message.success})).catch((e=>{console.log(e),s.textContent=this.message.failure})).finally((()=>{setTimeout((()=>{s.classList.add("fadeOut"),setTimeout((()=>s.remove()),2e3)}),3e3)}))}))}))}}class a{constructor(e){this.btns=document.querySelectorAll(e)}init(){this.btns.forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".module__info-show").nextElementSibling;t.classList.toggle("msg"),t.style.marginTop="20px"}))}))}}class r{constructor(e){this.btns=document.querySelectorAll(e),this.path="assets/img/mainbg.jpg"}downloadItem(e){const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","nice_picture"),t.style.display="none",document.body.append(t),t.click(),t.remove()}init(){this.btns.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),this.downloadItem(this.path)}))}))}}window.addEventListener("DOMContentLoaded",(()=>{new t({btns:".next",container:".page"}).render(),new t({container:".moduleapp",btns:".next"}).render(),new i({container:".showup__content-slider",prev:".showup__prev",next:".showup__next",activeClass:"card-active",animate:!0}).init(),new i({container:".modules__content-slider",prev:".modules__info-btns .slick-prev",next:".modules__info-btns .slick-next",activeClass:"card-active",animate:!0,autoPlay:5e3}).init(),new i({container:".feed__slider",prev:".feed__slider .slick-prev",next:".feed__slider .slick-next",activeClass:"feed__item-active"}).init(),new s(".showup .play",".overlay").init(),new s(".module__video-item .play",".overlay").init(),new n(".officerold",".officernew",".officer__card-item").init(),new l("form").init(),new a(".plus__content").init(),new r(".download").init()}))})();
//# sourceMappingURL=bundle.js.map